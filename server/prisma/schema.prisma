generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id                    Int      @id @default(autoincrement())
  email                 String   @unique
  name                  String?
  password              String
  isVerified            Boolean  @default(false)
  verificationCode      String? 
  verificationSentAt    DateTime?
  resetCode             String?
  resetSentAt           DateTime?
  notes                 Note[]
  createdAt             DateTime @default(now())
}

model Note {
  id         Int        @id @default(autoincrement())
  title      String     @default("")
  content    String     @default("")
  pinned     Boolean    @default(false)
  archived   Boolean    @default(false)
  reminderAt DateTime?
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  userId     Int
  user       User       @relation(fields: [userId], references: [id])
  tags       Tag[]      @relation("NoteTags")
  attachments Attachment[]
}

model Tag {
  id    Int    @id @default(autoincrement())
  name  String @unique
  notes Note[] @relation("NoteTags")
}

model Attachment {
  id        Int     @id @default(autoincrement())
  filename  String
  mimetype  String
  size      Int
  url       String
  note      Note    @relation(fields: [noteId], references: [id])
  noteId    Int
  createdAt DateTime @default(now())
}
